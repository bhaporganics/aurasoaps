<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vetiver Soap | Divine Handmade Soap | Aura</title>
    <meta name="description" content="Experience pure Ayurvedic Vetiver handmade soap from Aura. Natural, organic skincare with Vetiver for radiant, healthy skin. Available in 100g size.">
    <meta name="keywords" content="Vetiver Soap, Ayurvedic Vetiver Soap, handmade Vetiver soap, natural skincare, organic Vetiver soap, Vetiver skincare, natural beauty products, Vetiver for skin">
    <meta name="author" content="Aura, BHAP Organics">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Vetiver Soap | Divine Handmade Soap | Aura">
    <meta property="og:description" content="Natural Ayurvedic Vetiver handmade soap for radiant skin">
    <meta property="og:type" content="product">
    <meta property="og:url" content="https://bhaporganics.github.io/aurasoaps/product-vetiver.html">
    <meta property="og:image" content="https://images.unsplash.com/photo-1608248242905-5f2274e7d4d5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80">
    <link rel="canonical" href="https://bhaporganics.github.io/aurasoaps/product-vetiver.html">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="product-detail.css"> 
</head>
<body itemscope itemtype="https://schema.org/Product">
    <header>
        <div class="nav-container">
            <a href="index.html" class="logo" itemprop="url">
                <img src="logo-aura.png" alt="Aura Logo" class="logo-img">
                <span itemprop="name">AURA<span></span></span>
            </a>
            
            <div class="nav-links" id="navLinks">
                <a href="index.html#home">Home</a>
                <a href="index.html#about">About Us</a>
                <a href="index.html#products" class="active">Products</a>
                <a href="index.html#benefits">Benefits</a>
                <a href="index.html#contact">Contact</a>
            </div>
            
            <div class="nav-icons-wrapper">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
            
                <div class="cart-icon" id="cartIcon">
                    <i class="fas fa-shopping-bag"></i>
                    <span class="cart-count">0</span>
                </div>
            </div>
            </div>
    </header>

    <button class="mobile-fab" id="mobileFab" style="display:none !important;">
        <i class="fas fa-shopping-bag"></i>
    </button>

    <section class="product-hero">
        <div class="container product-hero-container">
            <div class="product-gallery">
                <div class="product-badge">Handmade</div>
                
                <div class="slideshow-container" id="slideshowContainer">
                    <div class="slideshow-slide active" data-index="0">
                        <img src="images/vetiver_soap_2.jpg" 
                            alt="Aura Vetiver Soap 100g - Natural Ayurvedic handmade soap with vetiver" 
                            itemprop="image"
                            loading="lazy">
                    </div>
                    
                    <div class="slideshow-slide" data-index="1">
                        <img src="images/vetiver_benefits.jpg" 
                            alt="Vetiver Soap ingredients and packaging - Premium Ayurvedic skincare" 
                            itemprop="image"
                            loading="lazy">
                    </div>
                    
                    <button class="slideshow-arrow prev" id="slideshowPrev">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="slideshow-arrow next" id="slideshowNext">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    
                    <div class="slideshow-nav" id="slideshowDots">
                        <div class="slideshow-dot active" data-index="0"></div>
                        <div class="slideshow-dot" data-index="1"></div>
                    </div>
                </div>
                
                <div class="product-thumbnails">
                    <div class="thumbnail active" data-image-index="0">
                        <img src="images/vetiver_soap_2.jpg" 
                            alt="Vetiver Soap thumbnail" 
                            loading="lazy">
                    </div>
                    <div class="thumbnail" data-image-index="1">
                        <img src="images/vetiver_benefits.jpg" 
                            alt="Vetivere Soap ingredients thumbnail" 
                            loading="lazy">
                    </div>
                </div>
            </div>
            
            <div class="product-info">
                <h1 itemprop="name">Vetiver Soap</h1>
                <div class="product-subtitle" itemprop="description">Purely Earthy – Timeless Skin Care</div>
                
                <div class="product-rating" itemprop="aggregateRating" itemscope itemtype="https://schema.org/AggregateRating">
                    <div class="stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <div class="rating-text">
                        <span itemprop="ratingValue">4.7</span>/5
                    </div>
                </div>
                
                <p class="product-description" itemprop="description">
                    Immerse yourself in the deep, grounding aroma of natural vetiver. Our Vetiver Soap is crafted with pure vetiver root powder and nourishing oils to gently cleanse, cool the skin, relieve irritation, and promote balanced, healthy-looking skin while maintaining its natural moisture.</p>
                
                <div class="size-display">
                    <h3>Size:</h3>
                    <div class="size-value">100g</div>
                    <div style="font-size: 0.85rem; color: #666; margin-top: 5px;">Perfect for 4-6 weeks of daily use</div>
                </div>
                
                <div class="price-section">
                    <div class="price-container">
                        <span class="original-price" id="originalPrice">₹180</span>
                        <span class="current-price" id="currentPrice">₹160</span>
                        <span class="discount-badge" id="discountBadge">11% OFF</span>
                        <span class="price-savings" id="priceSavings">Save ₹20</span>
                    </div>
                    
                    <div class="quantity-selector">
                        <div class="quantity-control">
                            <button class="qty-btn" id="decreaseQty">-</button>
                            <span class="qty-display" id="quantity">1</span>
                            <button class="qty-btn" id="increaseQty">+</button>
                        </div>
                        <div style="font-weight:600;color:var(--secondary);font-size:1rem;">Total: ₹<span id="totalPrice">160</span></div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="btn-primary" id="addToCart">
                            <i class="fas fa-shopping-bag"></i> Add to Cart
                        </button>
                        <button class="btn-secondary" id="buyNow">
                            <i class="fab fa-whatsapp"></i> Buy Now
                        </button>
                    </div>
                </div>
                
                <div class="features">
                    <div class="feature">
                        <i class="fas fa-shipping-fast"></i>
                        <span>Minimal Shipping cost</span>
                    </div>
                    <div class="feature">
                        <i class="fas fa-award"></i>
                        <span>Ayurvedic</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section" itemscope itemtype="https://schema.org/ItemList">
        <div class="container">
            <h2 class="section-title">Sacred Ingredients</h2>
            <p style="text-align:center;max-width:600px;margin:0 auto 30px;font-size:0.9rem;color:#555;">
                Every ingredient is carefully selected for its purity and therapeutic benefits.
            </p>
            
            <div class="ingredients-grid">
                <div class="ingredient-card">
                    <div class="ingredient-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <h3>Pure Vetiver Root</h3>
                    <p>Sourced from trusted origins, vetiver is renowned for its cooling, antibacterial, and stress-relieving properties. It helps calm inflamed skin, control excess oil, reduce body odor, and enhance skin clarity with its earthy, soothing fragrance.</p>
                </div>
                
                <div class="ingredient-card">
                    <div class="ingredient-icon">
                        <i class="fas fa-oil-can"></i>
                    </div>
                    <h3>Coconut & Olive Oil</h3>
                    <p>Deeply moisturizing and antibacterial, provides a rich lather while maintaining the skin's natural moisture barrier.</p>
                </div>
                
                <div class="ingredient-card">
                    <div class="ingredient-icon">
                        <i class="fas fa-spa"></i>
                    </div>
                    <h3>Shea Butter</h3>
                    <p>Intensely hydrating with vitamins A and E, heals dry skin and provides anti-aging benefits.</p>
                </div>
                
                <div class="ingredient-card">
                    <div class="ingredient-icon">
                        <i class="fas fa-flask"></i>
                    </div>
                    <h3>Fragrance Oil</h3>
                    <p>Pure steam-distilled oil that balances skin pH, reduces inflammation, and uplifts mood with its soft floral aroma.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <h2 class="section-title">Crafted with Devotion</h2>
            <p style="text-align:center;max-width:600px;margin:0 auto 30px;font-size:0.9rem;color:#555;">
                Each bar is handmade following ancient Ayurvedic principles with modern care.
            </p>
            
            <div class="craftsmanship-grid">
                <div class="craft-step">
                    <div class="step-number">1</div>
                    <h3>Ingredient Selection</h3>
                    <p>Only the finest vetiver roots are carefully sourced, shade-dried, and ground into micro-fine powder to preserve their natural aroma, cooling effect, and skin-balancing benefits.</p>
                </div>
                
                <div class="craft-step">
                    <div class="step-number">2</div>
                    <h3>Cold Process Method</h3>
                    <p>Base oils (coconut oil, olive oil, and shea butter) are blended at low temperatures with pure vetiver powder using the authentic cold-process technique. This method helps retain nutrients while delivering a rich, creamy, and refreshing lather.</p>
                </div>
                
                <div class="craft-step">
                    <div class="step-number">3</div>
                    <h3>Natural Curing</h3>
                    <p>Each bar is air-dried for 6 weeks, allowing natural saponification, improved hardness, and the development of a gentle, long-lasting bar.</p>
                </div>
                
                <div class="craft-step">
                    <div class="step-number">4</div>
                    <h3>Packaging</h3>
                    <p>The Vetiver Soap is carefully packed by hand in a clean and mindful process, reflecting its traditional charm. With its naturally calming aroma and elegant finish, the soap is ready to cleanse, refresh, and leave your skin subtly scented with an earthy freshness.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="section similar-products">
        <div class="container">
            <h2 class="section-title">You May Also Like</h2>
            <p style="text-align:center;max-width:600px;margin:0 auto 30px;font-size:0.9rem;color:#555;">
                Discover more from our divine handmade soap collection
            </p>
            
            <div class="similar-products-grid" id="similarProductsGrid">
                </div>
        </div>
    </section>

    <section class="section" style="background:var(--light);">
        <div class="container">
            <h2 class="section-title">Customer Love</h2>
            
            <div class="reviews-carousel">
                <div class="swiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <div class="review-card">
                                <div class="review-header">
                                    <div class="review-avatar">
                                        <i class="fas fa-user-circle"></i>
                                    </div>
                                    <div>
                                        <div class="review-rating">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <div style="font-weight:600;color:var(--secondary);font-size:0.95rem;">Swetha Anand</div>
                                    </div>
                                </div>
                                <p class="review-text" style="font-size:0.9rem;">
                                    "I've struggled with sensitive skin for years. This Rose Petal soap is a game-changer! No more redness or dryness. My skin feels nourished and smells divine."
                                </p>
                                <div style="font-size:0.8rem;color:#888;margin-top:12px;">
                                    <i class="far fa-clock"></i> 2 months ago
                                </div>
                            </div>
                        </div>
                        
                        <div class="swiper-slide">
                            <div class="review-card">
                                <div class="review-header">
                                    <div class="review-avatar">
                                        <i class="fas fa-user-circle"></i>
                                    </div>
                                    <div>
                                        <div class="review-rating">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star-half-alt"></i>
                                        </div>
                                        <div style="font-weight:600;color:var(--secondary);font-size:0.95rem;">Mirthin Raj</div>
                                    </div>
                                </div>
                                <p class="review-text" style="font-size:0.9rem;">
                                    "As someone with combination skin, finding the right soap was tough. This balances everything perfectly! Not too drying, not too oily. The rose fragrance is subtle and calming."
                                </p>
                                <div style="font-size:0.8rem;color:#888;margin-top:12px;">
                                    <i class="far fa-clock"></i> 1 month ago
                                </div>
                            </div>
                        </div>
                        
                        <div class="swiper-slide">
                            <div class="review-card">
                                <div class="review-header">
                                    <div class="review-avatar">
                                        <i class="fas fa-user-circle"></i>
                                    </div>
                                    <div>
                                        <div class="review-rating">
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                            <i class="fas fa-star"></i>
                                        </div>
                                        <div style="font-weight:600;color:var(--secondary);font-size:0.95rem;">Kala Devi</div>
                                    </div>
                                </div>
                                <p class="review-text" style="font-size:0.9rem;">
                                    "The packaging alone is beautiful! But the product inside is even better. My skin has never felt this soft. I've gifted this to all my friends - they're all converts now!"
                                </p>
                                <div style="font-size:0.8rem;color:#888;margin-top:12px;">
                                    <i class="far fa-clock"></i> 3 weeks ago
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="swiper-button-next" style="color:var(--accent);font-size:1.2rem;"></div>
                    <div class="swiper-button-prev" style="color:var(--accent);font-size:1.2rem;"></div>
                    
                    <div class="swiper-pagination"></div>
                </div>
            </div>
        </div>
    </section>

    <div class="cart-modal" id="cartModal">
        <div class="cart-header">
            <h2>Your Cart</h2>
            <button class="close-cart" id="closeCart">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="min-order-progress" id="minOrderProgress" style="display: none;">
            <div class="progress-header">
                <div class="progress-text">Minimum Order Progress</div>
                <div class="progress-count" id="progressCount">0/3</div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            <div class="progress-message" id="progressMessage">
                Add 3 more products to place your order
            </div>
        </div>
        
        <div class="cart-items" id="cartItems">
            <div class="empty-cart-message" id="emptyCartMessage">
                <p>Your cart is empty</p>
                <p>Add some divine soaps to get started!</p>
            </div>
        </div>
        
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">₹0</span>
            </div>
            
            <div class="cart-actions">
                <button class="whatsapp-order-btn" id="whatsappCartBtn">
                    <i class="fab fa-whatsapp"></i> Order via WhatsApp
                </button>
                <button class="email-order-btn" id="emailCartBtn">
                    <i class="fas fa-envelope"></i> Order via Email
                </button>
            </div>
        </div>
    </div>
    
    <footer id="contact" itemscope itemtype="https://schema.org/LocalBusiness">
        <div class="footer-container">
            <div class="footer-column">
                <h3>AURA</h3>
                <p itemprop="description">Experience the purity of nature with our handmade organic soaps, crafted with ancient Ayurvedic wisdom and the finest natural ingredients for healthy skin.</p>
            </div>
            
            <div class="footer-column">
                <h3>Contact Us</h3>
                <div class="contact-info">
                    <i class="fab fa-whatsapp"></i>
                    <a href="https://wa.me/918532853241" target="_blank">WhatsApp: 8532853241</a>
                </div>
                <div class="contact-info">
                    <i class="fas fa-envelope"></i>
                    <a href="mailto:bhaporganics@gmail.com" itemprop="email">bhaporganics@gmail.com</a>
                </div>
                <div class="contact-info">
                    <i class="fas fa-map-marker-alt"></i>
                    <span itemprop="address" itemscope itemtype="https://schema.org/PostalAddress">
                        <span itemprop="addressLocality">Theni</span>, 
                        <span itemprop="addressRegion">Tamilnadu</span>
                    </span>
                </div>
            </div>
            
            <div class="footer-column">
                <h3>Quick Links</h3>
                <a href="index.html#home">Home</a>
                <a href="index.html#about">About Us</a>
                <a href="index.html#products">Products</a>
                <a href="index.html#benefits">Benefits</a>
                <a href="index.html#order">Order Options</a>
                <a href="#contact">Contact</a>
            </div>
            
            <div class="footer-column">
                <h3>Our Promise</h3>
                <p>100% Natural Ingredients</p>
                <p>Handmade with Care</p>
                <p>Cruelty-Free & Sustainable</p>
                <p>Ayurvedic Formulations</p>
                <p>No Artificial Preservatives</p>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; AURA - From the House of BHAP Organics. All rights reserved.</p>
        </div>
    </footer>

    <div class="back-to-top" id="backToTop">
        <i class="fas fa-chevron-up"></i>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <script src="products-data.js"></script> 
    
    <script>
        // Use the product data from the common file (products-data.js)
        const PRODUCT_ID = 'product-1'; 
        const productData = allProducts.find(p => p.id === PRODUCT_ID);

        // Fallback for robust initialization
        if (!productData) {
            console.error("Product data not found for ID:", PRODUCT_ID);
            // Define fallback product data if not found in the array
            const FALLBACK_PRODUCT = {
                id: PRODUCT_ID,
                name: "Rose Petal",
                subtitle: "Simply Rosy",
                price: 160,
                mrp: 180,
                weight: "100g",
                size: "100g",
                image: "images/rosepetal_soap_2.jpg",
                alt: "Aura Rose Petal Handmade Soap - Natural Ayurvedic Soap with Rose Petals for Soft Skin"
            };
            Object.assign(productData, FALLBACK_PRODUCT);
        }
        
        // Product Configuration
        const productId = productData.id;
        const productName = productData.name;
        const productSubtitle = productData.subtitle || 'Simply Rosy'; // Use fallback from index.html logic
        const productPrice = productData.price;
        const productMrp = productData.mrp;
        const productWeight = productData.weight || "100g";
        const productSize = productData.size || "100g";
        const productImage = productData.image;
        const productAlt = productData.alt;
        let quantity = 1;

        // DOM Elements
        const cartModal = document.getElementById('cartModal');
        const cartIcon = document.getElementById('cartIcon');
        const closeCart = document.getElementById('closeCart');
        const cartItemsContainer = document.getElementById('cartItems');
        const cartTotalElement = document.getElementById('cartTotal');
        const cartCountElement = document.querySelector('.cart-count');
        const emptyCartMessage = document.getElementById('emptyCartMessage');
        const whatsappCartBtn = document.getElementById('whatsappCartBtn');
        const emailCartBtn = document.getElementById('emailCartBtn');
        const mobileFab = document.getElementById('mobileFab');
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');
        
        // Shared Cart System
        let cart = [];
        const MIN_ORDER_ITEMS = 3;
        
        // --- Product-Specific Logic ---
        
        // Premium Slideshow Variables
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slideshow-slide');
        let totalSlides = slides.length;
        let slideshowInterval;
        
        // Initialize Premium Slideshow
        function initSlideshow() {
            const dots = document.querySelectorAll('.slideshow-dot');
            totalSlides = slides.length;
            
            updateSlideshow();
            startSlideshow();
            
            document.getElementById('slideshowPrev').addEventListener('click', () => {
                navigateSlideshow(-1);
            });
            
            document.getElementById('slideshowNext').addEventListener('click', () => {
                navigateSlideshow(1);
            });
            
            dots.forEach(dot => {
                dot.addEventListener('click', function() {
                    const index = parseInt(this.dataset.index);
                    goToSlide(index);
                });
            });
            
            document.querySelectorAll('.thumbnail').forEach(thumb => {
                thumb.addEventListener('click', function() {
                    const index = parseInt(this.dataset.imageIndex);
                    goToSlide(index);
                });
            });
            
            const slideshowContainer = document.getElementById('slideshowContainer');
            slideshowContainer.addEventListener('mouseenter', () => {
                clearInterval(slideshowInterval);
            });
            
            slideshowContainer.addEventListener('mouseleave', () => {
                startSlideshow();
            });
        }
        
        function startSlideshow() {
            clearInterval(slideshowInterval);
            slideshowInterval = setInterval(() => {
                navigateSlideshow(1);
            }, 4000);
        }
        
        function navigateSlideshow(direction) {
            currentSlide = (currentSlide + direction + totalSlides) % totalSlides;
            updateSlideshow();
        }
        
        function goToSlide(index) {
            currentSlide = index;
            updateSlideshow();
        }
        
        function updateSlideshow() {
            const dots = document.querySelectorAll('.slideshow-dot');
            const thumbnails = document.querySelectorAll('.thumbnail');
            
            slides.forEach((slide, index) => {
                slide.classList.remove('active');
                if (index === currentSlide) {
                    slide.classList.add('active');
                }
            });
            
            dots.forEach((dot, index) => {
                dot.classList.remove('active');
                if (index === currentSlide) {
                    dot.classList.add('active');
                }
            });
            
            thumbnails.forEach((thumb, index) => {
                thumb.classList.remove('active');
                if (index === currentSlide) {
                    thumb.classList.add('active');
                }
            });
        }
        
        // Quantity Controls
        document.getElementById('decreaseQty').addEventListener('click', () => {
            if (quantity > 1) {
                quantity--;
                updatePriceDisplay();
            }
        });
        
        document.getElementById('increaseQty').addEventListener('click', () => {
            if (quantity < 10) {
                quantity++;
                updatePriceDisplay();
            }
        });
        
        // Update Price Display on Product Page
        function updatePriceDisplay() {
            const total = productPrice * quantity;
            const totalMrp = productMrp * quantity;
            const discountPercent = Math.round(((productMrp - productPrice) / productMrp) * 100);
            const savings = totalMrp - total;
            
            document.getElementById('quantity').textContent = quantity;
            document.getElementById('currentPrice').textContent = `₹${productPrice}`;
            document.getElementById('originalPrice').textContent = `₹${productMrp}`;
            document.getElementById('totalPrice').textContent = total;
            document.getElementById('discountBadge').textContent = `${discountPercent}% OFF`;
            document.getElementById('priceSavings').textContent = `Save ₹${savings}`;
        }
        
        // Add to Cart Functionality
        document.getElementById('addToCart').addEventListener('click', () => {
            const product = {
                id: productId,
                name: productName,
                subtitle: productSubtitle,
                price: productPrice,
                mrp: productMrp,
                weight: productWeight,
                size: productSize,
                quantity: quantity,
                image: productImage,
                alt: productAlt,
                scrubOption: 'soap-only' // Default to soap-only since no scrub modal is implemented here
            };
            
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += product.quantity;
            } else {
                cart.push(product);
            }
            
            saveCartToStorage();
            updateCart();
            
            showNotification(`${quantity} × ${productName} added to cart!`);
            
            // Reset quantity after adding to cart
            quantity = 1;
            updatePriceDisplay();
        });
        
        // Buy Now Functionality - Direct WhatsApp
        document.getElementById('buyNow').addEventListener('click', () => {
            const totalPrice = productPrice * quantity;
            const totalMrp = productMrp * quantity;
            const savings = totalMrp - totalPrice;
            const discountPercent = Math.round((savings / totalMrp) * 100);
            
            const message = `Hello, I would like to buy ${quantity} × ${productName} Soap (${productWeight}) for ₹${totalPrice}. 
Original Price: ₹${totalMrp}
Discount: ${discountPercent}% OFF
You Save: ₹${savings}

Please confirm my order and provide delivery details.`;
            
            const whatsappUrl = `https://wa.me/918532853241?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        });
        
        // --- Common Cart Logic (Copied/Adapted from script.js) ---

        function loadCartFromStorage() {
            const savedCart = sessionStorage.getItem('auraCleanseCart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
            } else {
                cart = [];
            }
            updateCart();
        }

        function saveCartToStorage() {
            sessionStorage.setItem('auraCleanseCart', JSON.stringify(cart));
            sessionStorage.setItem('auraCleanseCartTimestamp', Date.now());
            try {
                localStorage.setItem('cartUpdated', Date.now().toString());
            } catch (e) {
                console.log("Local storage notification failed");
            }
        }
        
        function getTotalItemsInCart() {
            return cart.reduce((total, item) => total + item.quantity, 0);
        }

        function isMinimumOrderMet() {
            return getTotalItemsInCart() >= MIN_ORDER_ITEMS;
        }

        function updateCart() {
            const totalItems = getTotalItemsInCart();
            cartCountElement.textContent = totalItems;
            
            cartItemsContainer.innerHTML = '';
            
            if (cart.length === 0) {
                emptyCartMessage.style.display = 'block';
                cartItemsContainer.appendChild(emptyCartMessage);
            } else {
                emptyCartMessage.style.display = 'none';
                
                let totalPrice = 0;
                let totalMrp = 0;
                
                cart.forEach(item => {
                    totalPrice += item.price * item.quantity;
                    totalMrp += item.mrp * item.quantity;
                    
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    
                    const scrubIndicator = item.scrubOption === 'with-scrub' ? 
                        '<span class="scrub-indicator">+ Scrub</span>' : '';

                    cartItem.innerHTML = `
                        <div class="cart-item-image">
                            <img src="${item.image || 'soap.jpg'}" alt="${item.alt || item.name}" loading="lazy">
                        </div>
                        <div class="cart-item-details">
                            <div class="cart-item-title">${item.name} ${item.weight ? '(' + item.weight + ')' : ''}${scrubIndicator}</div>
                            <div class="cart-item-price">
                                ₹${item.price} × ${item.quantity} = ₹${item.price * item.quantity}
                                <div style="font-size: 0.8rem; color: #999; text-decoration: line-through;">MRP: ₹${item.mrp * item.quantity}</div>
                            </div>
                        </div>
                        <div class="cart-item-actions">
                            <button class="cart-quantity-btn decrease-cart" data-id="${item.id}" data-scrub="${item.scrubOption || 'soap-only'}">
                                <i class="fas fa-minus"></i>
                            </button>
                            <span class="cart-item-quantity">${item.quantity}</span>
                            <button class="cart-quantity-btn increase-cart" data-id="${item.id}" data-scrub="${item.scrubOption || 'soap-only'}">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="remove-item" data-id="${item.id}" data-scrub="${item.scrubOption || 'soap-only'}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    
                    cartItemsContainer.appendChild(cartItem);
                });
                
                // Event listeners for cart item buttons
                document.querySelectorAll('.decrease-cart').forEach(button => {
                    button.addEventListener('click', function() {
                        const productId = this.getAttribute('data-id');
                        const scrubOption = this.getAttribute('data-scrub');
                        updateCartQuantity(productId, scrubOption, -1);
                    });
                });
                
                document.querySelectorAll('.increase-cart').forEach(button => {
                    button.addEventListener('click', function() {
                        const productId = this.getAttribute('data-id');
                        const scrubOption = this.getAttribute('data-scrub');
                        updateCartQuantity(productId, scrubOption, 1);
                    });
                });
                
                document.querySelectorAll('.remove-item').forEach(button => {
                    button.addEventListener('click', function() {
                        const productId = this.getAttribute('data-id');
                        const scrubOption = this.getAttribute('data-scrub');
                        removeFromCart(productId, scrubOption);
                    });
                });
                
                const totalSavings = totalMrp - totalPrice;
                cartTotalElement.innerHTML = `
                    <div>Total: ₹${totalPrice}</div>
                    <div style="font-size: 0.9rem; color: #27ae60; font-weight: normal;">
                        You save: ₹${totalSavings}
                    </div>
                `;
            }

            updateMinimumOrderUI();
        }

        function updateCartQuantity(productId, scrubOption, change) {
            const item = cart.find(item => 
                item.id === productId && item.scrubOption === scrubOption
            );
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    cart = cart.filter(item => 
                        !(item.id === productId && item.scrubOption === scrubOption)
                    );
                }
                updateCart();
                saveCartToStorage();
                updateMinimumOrderUI();
            }
        }

        function removeFromCart(productId, scrubOption) {
            cart = cart.filter(item => 
                !(item.id === productId && item.scrubOption === scrubOption)
            );
            updateCart();
            saveCartToStorage();
            updateMinimumOrderUI();
            showNotification('Item removed from cart');
        }

        function checkoutViaWhatsApp() {
            const totalItems = getTotalItemsInCart();
            if (totalItems === 0) {
                showNotification('Your cart is empty. Add some items first!');
                return;
            }
            if (!isMinimumOrderMet()) {
                showNotification(`Minimum order of ${MIN_ORDER_ITEMS} items not met.`);
                return;
            }
            
            let message = "Hello, I would like to place an order from Aura :\n\n";
            let total = 0;
            let totalMrp = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                const itemMrp = item.mrp * item.quantity;
                const sizeInfo = item.weight ? `(${item.weight})` : `(${item.size || '100g'})`;
                const scrubInfo = item.scrubOption === 'with-scrub' ? ' + Herbal Scrub' : '';
                message += `${item.name}${scrubInfo} ${sizeInfo}: ${item.quantity} × ₹${item.price} = ₹${itemTotal}\n`;
                total += itemTotal;
                totalMrp += itemMrp;
            });
            
            const savings = totalMrp - total;
            const discountPercent = Math.round((savings / totalMrp) * 100);
            
            message += `\nTotal: ₹${total}`;
            message += `\nTotal Savings: ₹${savings} (${discountPercent}% OFF)`;
            message += `\n\nPlease confirm my order and provide delivery details.`;
            
            const whatsappUrl = `https://wa.me/918532853241?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function checkoutViaEmail() {
            const totalItems = getTotalItemsInCart();
            if (totalItems === 0) {
                showNotification('Your cart is empty. Add some items first!');
                return;
            }
            if (!isMinimumOrderMet()) {
                showNotification(`Minimum order of ${MIN_ORDER_ITEMS} items not met.`);
                return;
            }
            
            // Simplified email checkout for product page (no modal here)
            let emailBody = `Hello Aura Team,\n\nI would like to place an order from your website.\n\nOrder Details:\n`;
            let total = 0;
            let totalMrp = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                const itemMrp = item.mrp * item.quantity;
                const sizeInfo = item.weight ? `(${item.weight})` : `(${item.size || '100g'})`;
                const scrubInfo = item.scrubOption === 'with-scrub' ? ' + Herbal Scrub' : '';
                emailBody += `- ${item.name}${scrubInfo} ${sizeInfo}: ${item.quantity} × ₹${item.price} = ₹${itemTotal}\n`;
                total += itemTotal;
                totalMrp += itemMrp;
            });
            
            const savings = totalMrp - total;
            emailBody += `\nOrder Total: ₹${total}`;
            emailBody += `\nTotal Savings: ₹${savings}`;
            emailBody += `\n\nPlease confirm my order and provide payment/delivery details.`;
            emailBody += `\n\nThank you.`;

            const subject = `Aura-Order - ${new Date().toLocaleDateString()}`;
            const mailtoLink = `mailto:bhaporganics@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
        }


        function updateMinimumOrderUI() {
            const totalItems = getTotalItemsInCart();
            const meetsMinimumOrder = isMinimumOrderMet();
            const minOrderProgress = document.getElementById('minOrderProgress');
            const progressBar = document.getElementById('progressBar');
            const progressCount = document.getElementById('progressCount');
            const progressMessage = document.getElementById('progressMessage');
            const progressPercentage = Math.min((totalItems / MIN_ORDER_ITEMS) * 100, 100);

            // Hide/show progress bar section (only needed for index.html)
            if (minOrderProgress) {
                if (totalItems > 0) {
                    minOrderProgress.style.display = 'block';
                } else {
                    minOrderProgress.style.display = 'none';
                }
            }

            if (progressBar) progressBar.style.width = `${progressPercentage}%`;
            if (progressCount) progressCount.textContent = `${totalItems}/${MIN_ORDER_ITEMS}`;
            
            if (progressMessage) {
                if (totalItems === 0) {
                    progressMessage.textContent = `Add ${MIN_ORDER_ITEMS} products to place your order`;
                    progressMessage.className = 'progress-message';
                } else if (totalItems < MIN_ORDER_ITEMS) {
                    const itemsNeeded = MIN_ORDER_ITEMS - totalItems;
                    progressMessage.textContent = `Add ${itemsNeeded} more product${itemsNeeded > 1 ? 's' : ''} to place your order`;
                    progressMessage.className = 'progress-message';
                } else {
                    progressMessage.textContent = '✓ Minimum order requirement met!';
                    progressMessage.className = 'progress-message progress-complete';
                }
            }
            
            // Disable buttons if cart is empty
            const checkoutButtons = [whatsappCartBtn, emailCartBtn];
            const isCartEmpty = totalItems === 0;

            checkoutButtons.forEach(btn => {
                if (btn) {
                    if (isCartEmpty) {
                        btn.style.opacity = '0.7';
                        btn.style.cursor = 'not-allowed';
                        // Remove listeners to prevent triggering the checkout logic 
                        // when cart is empty, relying on the notification logic inside checkout functions
                        btn.removeEventListener('click', checkoutViaWhatsApp); 
                        btn.removeEventListener('click', checkoutViaEmail);
                    } else {
                        btn.style.opacity = '1';
                        btn.style.cursor = 'pointer';
                        // Add listeners back if not already present
                        if (btn.id === 'whatsappCartBtn') {
                            btn.removeEventListener('click', checkoutViaWhatsApp); // Prevent duplicate listeners
                            btn.addEventListener('click', checkoutViaWhatsApp);
                        } else if (btn.id === 'emailCartBtn') {
                            btn.removeEventListener('click', checkoutViaEmail); // Prevent duplicate listeners
                            btn.addEventListener('click', checkoutViaEmail);
                        }
                    }
                }
            });
        }


        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 25px;
                right: 25px;
                background-color: var(--secondary);
                color: white;
                padding: 0.8rem 1.2rem;
                border-radius: var(--radius);
                box-shadow: var(--shadow);
                z-index: 3000;
                transform: translateY(100px);
                opacity: 0;
                transition: transform 0.3s ease, opacity 0.3s ease;
                font-weight: 500;
                max-width: 280px;
                text-align: center;
                font-size: 0.9rem;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateY(0)';
                notification.style.opacity = '1';
            }, 10);
            
            setTimeout(() => {
                notification.style.transform = 'translateY(100px)';
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        function initReviewCarousel() {
            new Swiper('.reviews-carousel .swiper', {
                slidesPerView: 1,
                spaceBetween: 20,
                loop: true,
                autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                breakpoints: {
                    768: {
                        slidesPerView: 2,
                        spaceBetween: 20,
                    },
                    1024: {
                        slidesPerView: 3,
                        spaceBetween: 25,
                    }
                }
            });
        }

        function getRandomProducts(excludeProductId, count = 3) {
            const otherProducts = allProducts.filter(product => product.id !== excludeProductId);
            
            if (otherProducts.length <= count) {
                return otherProducts;
            }
            
            const shuffled = [...otherProducts];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            
            return shuffled.slice(0, count);
        }
        
        function generateSimilarProducts() {
            const similarProducts = getRandomProducts(PRODUCT_ID, 3);
            const container = document.getElementById('similarProductsGrid');
            
            container.innerHTML = '';
            
            similarProducts.forEach(product => {
                const discountPercent = Math.round(((product.mrp - product.price) / product.mrp) * 100);
                
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.setAttribute('itemscope', '');
                productCard.setAttribute('itemtype', 'https://schema.org/Product');
                
                // Create a URL-friendly name for the product page
                const productUrlName = product.name.toLowerCase()
                    .replace(/\s+/g, '-')
                    .replace(/[^\w-]/g, '')
                    .replace(/-+/g, '-');

                productCard.innerHTML = `
                    <div class="product-card-image">
                        <img src="${product.image || 'soap.jpg'}" alt="${product.alt || product.name}" loading="lazy" itemprop="image">
                    </div>
                    <div class="product-card-content">
                        <h3 itemprop="name">${product.name}</h3>
                        <p itemprop="description" style="font-size: 0.85rem; color: #666; margin: 8px 0; line-height: 1.4;">${product.description}</p>
                        <div class="product-card-price-container">
                            <div class="product-card-price">₹${product.price}</div>
                            <div class="product-card-mrp">₹${product.mrp}</div>
                            <div style="font-size: 0.75rem; color: #27ae60; font-weight: 600; background-color: rgba(39, 174, 96, 0.1); padding: 2px 6px; border-radius: 4px;">
                                ${discountPercent}% OFF
                            </div>
                        </div>
                        <a href="product-${productUrlName}.html?id=${product.id}" class="product-card-btn" itemprop="url">
                            <i class="fas fa-shopping-bag"></i> View Details
                        </a>
                    </div>
                `;
                
                container.appendChild(productCard);
            });
        }
        
        // Header Scroll Effect & Menu Toggle
        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            const icon = menuToggle.querySelector('i');
            if (navLinks.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        });

        navLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('active');
                menuToggle.querySelector('i').classList.remove('fa-times');
                menuToggle.querySelector('i').classList.add('fa-bars');
            });
        });
        
        cartIcon.addEventListener('click', () => {
            cartModal.classList.add('open');
            if (window.innerWidth <= 768) {
                navLinks.classList.remove('active');
                menuToggle.querySelector('i').classList.remove('fa-times');
                menuToggle.querySelector('i').classList.add('fa-bars');
            }
        });
        
        closeCart.addEventListener('click', () => {
            cartModal.classList.remove('open');
        });

        function updateHeaderOnScroll() {
            const header = document.querySelector('header');
            if (window.scrollY > 50) {
                header.classList.add('header-scrolled');
            } else {
                header.classList.remove('header-scrolled');
            }
        }

        // Back to Top Button
        const backToTop = document.getElementById('backToTop');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
            updateHeaderOnScroll();
        });
        
        backToTop.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Close cart when clicking outside
        document.addEventListener('click', (e) => {
            if (!cartModal.contains(e.target) && !cartIcon.contains(e.target) && cartModal.classList.contains('open')) {
                cartModal.classList.remove('open');
            }
        });
        
        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            loadCartFromStorage();
            initSlideshow();
            updatePriceDisplay();
            generateSimilarProducts();
            initReviewCarousel();

            window.addEventListener('storage', function(e) {
                if (e.key === 'cartUpdated') {
                    loadCartFromStorage();
                }
            });
            
            document.documentElement.style.overflowX = 'hidden';
            document.body.style.overflowX = 'hidden';
            updateHeaderOnScroll();
        });
    </script>
</body>
</html>